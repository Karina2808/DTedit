<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DTedit • DTedit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="DTedit">
<meta property="og:description" content="DTedit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DTedit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dtedit.html">DTedit</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DavidPatShuiFong/DTedit/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="dtedit_files/header-attrs-2.4/header-attrs.js"></script><script src="dtedit_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>DTedit</h1>
                        <h4 class="author">David Fong</h4>
            
            <h4 class="date">2020-10-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DavidPatShuiFong/DTedit/blob/master/vignettes/dtedit.Rmd"><code>vignettes/dtedit.Rmd</code></a></small>
      <div class="hidden name"><code>dtedit.Rmd</code></div>

    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      Editable DataTables (DT) package for shiny apps. Originally created by Jason Bryer. Data columns to view or edit can be selected. Different datatypes can be edited. Valid input choices and interaction with persistent storage can be defined through callbacks. In the case of limited selection choices for data columns with ‘dropdown’ inputs, the choices can be defined and dynamically changed. Available in general-purpose and module versions.<br><br>
</div>
    
<p><br></p>
<p>Package version : 2.2.4</p>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The DTedit package allows the viewing and editing of dataframes, via the <a href="https://rstudio.github.io/DT/">DT</a> (DataTables for <a href="https://shiny.rstudio.com/">shiny</a>) package.</p>
<p>An entry (row) of the viewed datatable is selected, and can then be edited, copied or deleted. New entries (rows) can be added.</p>
<p>Numerous <strong>data types</strong> (alphanumeric characters, passwords, numbers, dates, ‘categorical’/factors and raw ‘binary’) can be edited. The data columns which are viewed or edited can be chosen. In the case where choices are restricted (‘categorical’/factor, or if required, alphanumeric), the available choices can be dynamically chosen.</p>
<p>Using <strong>callbacks</strong> it is possible to further verify whether an entry/row has been modified in an acceptable way. <strong>callbacks</strong> can also be used to enable persistent storage of modified dataframes into databases.</p>
<p><code>dtedit</code> (‘standard’ version) and <code>dteditmod</code> (‘module’ version) both return reactive versions of the editable dataframe. They also both accept reactive dataframes, and can change their copy of the dataframe in response to changes in the original reactive dataframe.</p>
<p>This vignette will describe the basic usage and features of <code>DTedit</code>.</p>
<p>Full option/argument descriptions can be found in <a href="#appendix">the appendix</a>.</p>
<p><br></p>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<div id="standard-version-dtedit" class="section level3">
<h3 class="hasAnchor">
<a href="#standard-version-dtedit" class="anchor"></a>‘Standard’ version <code>dtedit</code>
</h3>
<p>For the ‘standard’ (non-module) version, the <code>dtedit</code> object is defined within the <code>server</code> function. The <code>name</code> defined in the <code>dtedit</code> function (in this case <strong>Grocery_List</strong>) is referenced by a <code>uiOutput</code> object in the <code>ui</code> (user interface) definition, as seen in the very simple example below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># minimal DTedit example 'dtedit'</span>
<span class="co"># you can try this example in interactive mode</span>
<span class="co"># with 'example("dtedit")'</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://shiny.rstudio.com">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT">DT</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jbryer/DTedit">DTedit</a></span><span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p><img src="dtedit_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
<p><code>input</code> and <code>output</code> in <code>dtedit</code> is the same as is received by the <code>server</code> function. <code>thedata</code> is a dataframe.</p>
</div>
<div id="modular-version-dteditmod" class="section level3">
<h3 class="hasAnchor">
<a href="#modular-version-dteditmod" class="anchor"></a>Modular version <code>dteditmod</code>
</h3>
<p>The module version <code>dteditmod</code> is very similar to <code>dtedit</code>, and accepts many of the same arguments.</p>
<p><code>dteditmod</code> is referenced by the <code>callModule</code> function, which in turn is defined in shiny’s <code>server</code> function. Instead of using <code>name</code>, <code>dteditmod</code> uses <code>id</code> (in this case <strong>Grocery_List</strong>). The same <code>id</code> is referenced by <code>dteditmodUI</code> object in the <code>ui</code> (user interface) definition, surrounded by a <code><a href="https://shiny.rstudio.com/reference/shiny/latest/NS.html">shiny::NS</a></code> function call, as seen in the example below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># minimal DTedit example 'dteditmod'</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://shiny.rstudio.com">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jbryer/DTedit">DTedit</a></span><span class="op">)</span>

<span class="va">myModuleUI</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/NS.html">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tag.html">tagList</a></span><span class="op">(</span>
    <span class="fu"><a href="../reference/dteditmodUI.html">dteditmodUI</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">myModule</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/callModule.html">callModule</a></span><span class="op">(</span>
    <span class="va">dteditmod</span>,
    id <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu">myModuleUI</span><span class="op">(</span><span class="st">'myModule1'</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/callModule.html">callModule</a></span><span class="op">(</span><span class="va">myModule</span>, <span class="st">'myModule1'</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p>In this vignette, the ‘standard’ <code>dtedit</code> is mostly used. Some examples referenced, but not fully described, in the <code>DTedit</code> package use the modular <code>dteditmod</code>.</p>
</div>
</div>
<div id="receiving-changes-from-dtedit-or-dteditmod" class="section level2">
<h2 class="hasAnchor">
<a href="#receiving-changes-from-dtedit-or-dteditmod" class="anchor"></a>Receiving changes from <code>dtedit</code> (or <code>dteditmod</code>)</h2>
<p><code>dtedit</code> returns a list. The list includes <code>$thedata</code>, which is a reactive and will change when <code>dtedit</code>’s copy of the dataframe changes. The list also includes <code>$rows_selected</code>, which is a reactive and will change when a different row is selected.</p>
<p>In the example below, the results are stored in a variable name <strong>Grocery_List_Results</strong>. Every time the internal copy of <code>thedata</code> changes, so does <strong>Grocery_List_Results$thedata</strong>.</p>
<p>An <code>observeEvent</code> waits for changes in <strong>Grocery_List_Results$thedata</strong>.</p>
<p>The <code>observeEvent</code> then messages the contents of <strong>Grocery_List_Results$thedata</strong> to the console.</p>
<p>Similarly, an <code>observeEvent</code> waits for changes in <strong>Grocery_List_Results$rows_selected</strong>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">thedata</span>, <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">thedata</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">rows_selected</span>, ignoreNULL <span class="op">=</span> <span class="cn">FALSE</span>, <span class="op">{</span>
    <span class="co"># 'no' (NULL) row will be 'selected' after each edit of the data</span>
    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Selected row:"</span>, <span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">rows_selected</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
</div>
<div id="callbacks" class="section level2">
<h2 class="hasAnchor">
<a href="#callbacks" class="anchor"></a>Callbacks</h2>
<p>A more sophisticated approach to handling changing of the data is by using <strong>callbacks</strong>.</p>
<p>In the example below, <code>callback.update</code> is defined, and checks whether the purchase <code>Quantity</code> is less than zero. If <code>Quantity</code> is less than zero, an error is thrown, and it is not possible to store the updated data.</p>
<p>Note that <code>callback.insert</code> has been defined <em>differently</em>, and so it is still possible to create a <em>new</em> entry/row which has a negative purchase amount! In <code>grocery.insert.callback</code>, new entries must have a non-empty <strong>Buy</strong> entry, and does not allow more than ten quantity. Of course, <code>grocery.update.callback</code> and <code>grocery.insert.callback</code> could be re-defined to be consistent with each other.</p>
<p>Note that <code>grocery.insert.callback</code> combines error messages, and makes use of HTML line breaks.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">grocery.update.callback</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">olddata</span>, <span class="va">row</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># 'data' contains the dataframe *after* the row has been updated</span>
    <span class="co"># 'row' is the row number where data has been updated</span>
    <span class="co"># 'olddata' is the previous version of the data</span>
    
    <span class="kw">if</span> <span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">row</span>, <span class="st">"Quantity"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
      <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"Can't buy less than zero (0)!"</span><span class="op">)</span>
    <span class="op">}</span>
    
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>
  <span class="op">}</span>
  
  <span class="va">grocery.insert.callback</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">row</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># 'data' contains the dataframe *after* the row has been inserted</span>
    
    <span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">row</span>, <span class="st">"Buy"</span><span class="op">]</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">msg</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Item name can't be empty!"</span>
    <span class="op">}</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">row</span>, <span class="st">"Quantity"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">msg</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Can't buy more than ten (10)!"</span>
    <span class="op">}</span>
    <span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Negate</a></span><span class="op">(</span><span class="va">is.null</span><span class="op">)</span>, <span class="va">msg</span><span class="op">)</span>
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">msg</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">msg</span>, collapse <span class="op">=</span> <span class="st">"&lt;br&gt;"</span><span class="op">)</span><span class="op">)</span>
    
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>
  <span class="op">}</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    callback.update <span class="op">=</span> <span class="va">grocery.update.callback</span>,
    callback.insert <span class="op">=</span> <span class="va">grocery.insert.callback</span>
  <span class="op">)</span>
  
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p>More sophisticated <strong>callbacks</strong> can take the opportunity to store changed data in a persistent database. This is demonstrated in <code><a href="../reference/dtedit_demo.html">dtedit_demo()</a></code>. The source code for the demonstration can be seen with</p>
<ul>
<li><code><a href="../reference/dtedit_demo.html">dtedit_demo(options = list(display.mode = "showcase"))</a></code></li>
</ul>
<p>in the <code>app.R</code> tab.</p>
<p>The modular <code>dteditmod</code> version of the <strong>callbacks</strong> demonstration, with multiple callbacks for multiple datatables, can be seen with</p>
<ul>
<li><code>dtedit_mod_demo(options = list(display.mode = "showcase"))</code></li>
</ul>
<p>in the <code>app_mod.R</code> tab.</p>
</div>
<div id="inputevent---observing-input-events-from-the-neweditcopy-modal-dialogs" class="section level2">
<h2 class="hasAnchor">
<a href="#inputevent---observing-input-events-from-the-neweditcopy-modal-dialogs" class="anchor"></a><code>inputEvent</code> - observing input events from the New/Edit/Copy modal dialogs</h2>
<p><code>observeEvent</code>s, to watch for changes in the input dialogs, are created with the help of the <code>inputEvent</code> parameter. This is particularly useful for creating feedback to the user ‘on the fly’. It was designed to use together with <a href="https://github.com/merlinoa/shinyFeedback"><code>shinyfeedback</code></a>, but does not depend on <a href="https://github.com/merlinoa/shinyFeedback"><code>shinyfeedback</code></a>.</p>
<p>In the example below, which uses <a href="https://github.com/merlinoa/shinyFeedback"><code>shinyfeedback</code></a>, <code>inputEvent</code> is a named list, including functions with the names of editable columns. The functions takes an <code>inputId</code> argument of the input dialog which is related to the editable column. The function can then access the contents of the input dialog, create <a href="https://github.com/merlinoa/shinyFeedback"><code>shinyfeedback</code></a> messages, or even change the contents of the input dialog.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://shiny.rstudio.com">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jbryer/DTedit">DTedit</a></span><span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    inputEvent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      Quantity <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">value</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span> <span class="co"># if empty input box, will be NA</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">value</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/showFeedback.html">showFeedbackWarning</a></span><span class="op">(</span>
            inputId <span class="op">=</span> <span class="va">x</span>,
            text <span class="op">=</span> <span class="st">"Less than zero"</span>
          <span class="op">)</span>
        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/hideFeedback.html">hideFeedback</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
        <span class="op">}</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">10</span> <span class="op">&amp;&amp;</span> <span class="va">value</span> <span class="op">&lt;=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/showToast.html">showToast</a></span><span class="op">(</span><span class="st">"success"</span>, <span class="st">"That's a lot!"</span><span class="op">)</span>
        <span class="op">}</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/showToast.html">showToast</a></span><span class="op">(</span><span class="st">"error"</span>, <span class="st">"Too many, try again!"</span><span class="op">)</span>
          <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/updateNumericInput.html">updateNumericInput</a></span><span class="op">(</span>
            session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/domains.html">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span>,
            inputId <span class="op">=</span> <span class="va">x</span>,
            value <span class="op">=</span> <span class="cn">NA</span>
          <span class="op">)</span>
        <span class="op">}</span>
      <span class="op">}</span>,
      Buy <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">value</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>
        <span class="kw">if</span> <span class="op">(</span><span class="va">value</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/showFeedback.html">showFeedbackDanger</a></span><span class="op">(</span>
            inputId <span class="op">=</span> <span class="va">x</span>,
            text <span class="op">=</span> <span class="st">"Name must not be empty!"</span>
            <span class="co"># note that this is just a warning, really</span>
            <span class="co"># since this feedback itself does not</span>
            <span class="co"># enforce the warning.</span>
          <span class="op">)</span>
        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
          <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/hideFeedback.html">hideFeedback</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
        <span class="op">}</span>
      <span class="op">}</span>
    <span class="op">)</span>
  <span class="op">)</span>
  
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu">shinyFeedback</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyFeedback/man/useShinyFeedback.html">useShinyFeedback</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
</div>
<div id="reactive-thedata-dataframe" class="section level2">
<h2 class="hasAnchor">
<a href="#reactive-thedata-dataframe" class="anchor"></a>Reactive <code>thedata</code> dataframe</h2>
<p><code>thedata</code> can be a reactive <code>reactiveVal</code>, in which case <code>dtedit</code>’s copy of the <code>thedata</code> will change in response to changes in the original dataframe. In the example below, the input buttons <strong>more</strong> and <strong>less</strong> trigger changes in <strong>mydata</strong>, which will be detected by <code>dtedit</code>.</p>
<p>In the call to <code>dtedit</code>, <strong>mydata</strong> is referred to in the <code>thedata</code> definition as <strong>mydata</strong>, <em>not</em> <strong>mydata()</strong>.</p>
<p>Changes in <code>dtedit</code>’s copy of the data as the result of editing within <code>dtedit</code> do <strong>not</strong> automatically change the original dataframe <strong>mydata</strong>. The example below has set up an <code>observeEvent</code> to</p>
<ul>
<li>detect changes in <strong>Grocery_List_Results$thedata</strong>
</li>
<li>which then changes <strong>mydata</strong>
</li>
</ul>
<p>Note that <strong>Grocery_List_Results$thedata</strong> does <em>not</em> have trailing parentheses ‘()’.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/reactiveVal.html">reactiveVal</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="va">mydata</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">more</span>, <span class="op">{</span>
    <span class="co"># if the 'Buy More!' button is pressed</span>
    <span class="va">newdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu">mydata</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Buy</span>,
      Quantity <span class="op">=</span> <span class="fu">mydata</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Quantity</span> <span class="op">*</span> <span class="fl">2</span>,
      <span class="co"># doubles the quantity</span>
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
    <span class="fu">mydata</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">less</span>, <span class="op">{</span>
    <span class="co"># if the 'Too Much!' button is pressed</span>
    <span class="va">newdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu">mydata</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Buy</span>,
      Quantity <span class="op">=</span> <span class="fu">mydata</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Quantity</span> <span class="op">*</span> <span class="fl">0.5</span>,
      <span class="co"># halves the quantity</span>
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
    <span class="fu">mydata</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">thedata</span>, <span class="op">{</span>
    <span class="co"># the data has been added</span>
    <span class="co"># copy the changes to our own copy</span>
    <span class="fu">mydata</span><span class="op">(</span><span class="va">Grocery_List_Results</span><span class="op">$</span><span class="va">thedata</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html">actionButton</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"more"</span>, label <span class="op">=</span> <span class="st">"Buy More!"</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html">actionButton</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"less"</span>, label <span class="op">=</span> <span class="st">"Too Much!"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p>Another example of reactive dataframes can be seen, with source code, with</p>
<ul>
<li><code><a href="../reference/dtedit_reactive_demo.html">dtedit_reactive_demo(options = list(display.mode = "showcase"))</a></code></li>
</ul>
<p>the code is in the <code>app.R</code> tab. A modular version, using <code>dteditmod</code>, can be seen with <code><a href="https://rdrr.io/r/utils/example.html">example(dteditmodUI)</a></code>.</p>
</div>
<div id="view-and-edit-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#view-and-edit-columns" class="anchor"></a>View and Edit columns</h2>
<p>Sometimes not all columns of a dataframe should be viewed, or edited. The columns to edit or view can be defined.</p>
<p>In the example below, <code>edit.cols</code> is defined such that only <strong>Quantity</strong> and <strong>Comment</strong> columns can be edited. The <strong>Quantity</strong> column is not seen in the datatable view, because it is not included in the <code>view.cols</code> definition.</p>
<p>In addition, <strong>delete</strong>, <strong>add</strong> and <strong>copy</strong> buttons have been turned off with <code>show.delete</code>, <code>show.insert</code> and <code>show.copy</code> options all set to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      Comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Irish'</span>, <span class="st">'Not too sweet'</span>, <span class="st">'Jonathan'</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    edit.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Quantity'</span>, <span class="st">'Comment'</span><span class="op">)</span>,
    view.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Buy'</span>, <span class="st">'Comment'</span><span class="op">)</span>,
    show.delete <span class="op">=</span> <span class="cn">FALSE</span>,
    show.insert <span class="op">=</span> <span class="cn">FALSE</span>,
    show.copy <span class="op">=</span> <span class="cn">FALSE</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
</div>
<div id="custom-icons-for-neweditdeletecopy-buttons" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-icons-for-neweditdeletecopy-buttons" class="anchor"></a>Custom icons for New/Edit/Delete/Copy buttons</h2>
<p>By default, the <strong>Add</strong>, <strong>Edit</strong>, <strong>Delete</strong> and <strong>Copy</strong> buttons have no icons. Icons can be added with the <code>icon.add</code>, <code>icon.edit</code>, <code>icon.delete</code> and <code>icon.copy</code> options.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>, 
    icon.delete <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html">icon</a></span><span class="op">(</span><span class="st">"trash"</span><span class="op">)</span>, 
    icon.edit <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html">icon</a></span><span class="op">(</span><span class="st">"edit"</span><span class="op">)</span>, 
    icon.add <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html">icon</a></span><span class="op">(</span><span class="st">"plus"</span><span class="op">)</span>, 
    icon.copy <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html">icon</a></span><span class="op">(</span><span class="st">"copy"</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="co">#### shinytest code for testing purposes only ########</span>
  <span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># exported list for shinytest</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">Grocery_List</span><span class="op">$</span><span class="va">thedata</span>, <span class="op">{</span>
    <span class="va">data_list</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">Grocery_List</span><span class="op">$</span><span class="va">thedata</span>
  <span class="op">}</span><span class="op">)</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/exportTestValues.html">exportTestValues</a></span><span class="op">(</span>data_list <span class="op">=</span> <span class="op">{</span><span class="va">data_list</span><span class="op">}</span><span class="op">)</span>
  <span class="co">######################################################</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Listening on http://127.0.0.1:3622</span></pre></div>
<p><img src="dtedit_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div id="formatting-columns-datatable-call-and-datatable-rownames" class="section level2">
<h2 class="hasAnchor">
<a href="#formatting-columns-datatable-call-and-datatable-rownames" class="anchor"></a>Formatting columns : <code>datatable.call</code> and <code>datatable.rownames</code>
</h2>
<p><code>DTedit</code> uses <code>DT</code> by calling <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code>. <code>DT</code> <a href="https://rstudio.github.io/DT/functions.html">provides <em>helper</em> functions <code>format*()</code></a> to format table columns as currency, percentages or round numbers. To use the helper functions, the data needs to be pre-processed by <code><a href="https://rdrr.io/pkg/DT/man/datatable.html">DT::datatable</a></code> and <code>DT::format*()</code> <em>before</em> being passed to <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code>. These helper functions can be accessed by defining <code>datatable.call</code> as a pre-processing function.</p>
<p>The formatting demonstrated below is not actually appropriate to the <code>mtcars</code> data, but is used for demonstration purposes. The formatting does not work <a href="https://stackoverflow.com/questions/56879672/how-to-replacedata-in-dt-rendered-in-r-shiny-using-the-datatable-function">unless <code>datatable.rownames</code> is set to <code>TRUE</code></a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">magrittr</span><span class="op">)</span> <span class="co"># provides the pipe '%&gt;%' operator</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'mtcarstable'</span>,
    thedata <span class="op">=</span> <span class="va">mtcars</span>,
    datatable.rownames <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># needed for the format*() functions to work</span>
    datatable.call <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatSignif</a></span><span class="op">(</span><span class="st">'qsec'</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatCurrency</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatStyle</a></span><span class="op">(</span>
          <span class="st">'cyl'</span>,
          color <span class="op">=</span> <span class="st">'red'</span>, backgroundColor <span class="op">=</span> <span class="st">'orange'</span>, fontWeight <span class="op">=</span> <span class="st">'bold'</span>
        <span class="op">)</span>
      <span class="co"># note, none of this is proper formatting for the mtcars data!</span>
      <span class="co"># but serves to demonstrate the formatting</span>
    <span class="op">}</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'mtcars'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'mtcarstable'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p><img src="dtedit_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>By default, <code>datatable.call</code> is defined as :</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">}</span></pre></div>
<p><code>DTedit</code> will pass several arguments to <code>datatable.call</code>.</p>
<ul>
<li>
<code>data</code> a dataframe. May have been processed to add <code>actionButtons</code>
</li>
<li>
<code>options</code> - <code>datatable.options</code>
</li>
<li>
<code>rownames</code> - <code>datatable.rownames</code>
</li>
<li>
<code>escape</code> - escape all columns except those with <code>actionButtons</code>.</li>
<li>
<code>selection</code> - <code>single</code>
</li>
</ul>
</div>
<div id="input-types" class="section level2">
<h2 class="hasAnchor">
<a href="#input-types" class="anchor"></a><code>input.types</code>
</h2>
<p>The data class of the column determines the default input type of the column. The mappings are :</p>
<ul>
<li>list <span class="math inline">\(\rightarrow\)</span> “selectInputMultiple”</li>
<li>character <span class="math inline">\(\rightarrow\)</span> “textInput”</li>
<li>Date <span class="math inline">\(\rightarrow\)</span> “dateInput”</li>
<li>POSIXct <span class="math inline">\(\rightarrow\)</span> “datetimeInput”</li>
<li>factor <span class="math inline">\(\rightarrow\)</span> “selectInput”</li>
<li>integer <span class="math inline">\(\rightarrow\)</span> “numericInput”</li>
<li>numeric <span class="math inline">\(\rightarrow\)</span> “numericInput”</li>
<li>blob <span class="math inline">\(\rightarrow\)</span> “fileInput”</li>
</ul>
<p><code>input.types</code> can be explicitly defined.</p>
<p>Valid <code>input.types</code> are :</p>
<ul>
<li>dateInput</li>
<li>datetimeInput - <strong>note</strong> this requires <code>shinyWidgets</code> (&gt;= 0.5.2) package and <code>useairDatepicker</code> option.</li>
<li>selectInput</li>
<li>selectInputMultiple</li>
<li>selectInputReactive</li>
<li>selectInputMultipleReactive</li>
<li>numericInput</li>
<li>textInput</li>
<li>textAreaInput</li>
<li>passwordInput</li>
<li>fileInput.</li>
</ul>
<p>For an example of explicit definition, see <a href="#selectInput"><code>selectInput</code></a>.</p>
</div>
<div id="selectInput" class="section level2">
<h2 class="hasAnchor">
<a href="#selectInput" class="anchor"></a><code>selectInput</code> and <code>selectInputReactive</code>
</h2>
<p>Drop down choices can be defined statically by defining <code>input.types</code> as <code>selectInput</code>. <code>selectInput</code> will look for possible input choices in the following ways :</p>
<ul>
<li>if <code>input.choices</code> is defined (as in the example below)</li>
<li>the column is a ‘factor/categorical’ variable, with defined <code>factor</code>s</li>
<li>the pre-existing values already present in the column.</li>
</ul>
<p>Drop down choices can be changed dynamically by defining <code>input.types</code> as <code>selectInputReactive</code>. The <code>input.choices</code> for a <code>selectInputReactive</code> is a list name (in this case <code>buy.types.list</code>) in <code>input.choices.reactive</code>. <code>buy.types.list</code> in <code>input.choices.reactive</code> defines a reactive variable, which in the example below is <code>buy.Types</code>.</p>
<p>In the example below, if the radioButton <code>choices</code> is changed to <code>More</code> (value = 2), then the reactive variable <strong>buy.Types</strong> is changed to the longer vector of grocery names.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">less_choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span>, <span class="st">'Cheese'</span><span class="op">)</span>
  <span class="va">more_choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">less_choices</span>, <span class="st">'Coffee'</span>, <span class="st">'Pears'</span>, <span class="st">'Fish'</span><span class="op">)</span>
  
  <span class="va">buy.Types</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/reactiveVal.html">reactiveVal</a></span><span class="op">(</span><span class="va">less_choices</span><span class="op">)</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Plant'</span>, <span class="st">'Processed'</span>, <span class="st">'Fruit'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    input.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="st">'selectInputReactive'</span>,
      Type <span class="op">=</span> <span class="st">'selectInput'</span>
    <span class="op">)</span>,
    input.choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="st">'buy.Types.list'</span>,
      Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Plant'</span>, <span class="st">'Processed'</span>, <span class="st">'Fruit'</span>, <span class="st">'Animal'</span><span class="op">)</span>
    <span class="op">)</span>,
    input.choices.reactive <span class="op">=</span>
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>buy.Types.list <span class="op">=</span> <span class="va">buy.Types</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">choice</span>, <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">choice</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">buy.Types</span><span class="op">(</span><span class="va">less_choices</span><span class="op">)</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
      <span class="fu">buy.Types</span><span class="op">(</span><span class="va">more_choices</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span><span class="op">)</span>
  
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/radioButtons.html">radioButtons</a></span><span class="op">(</span>
    <span class="st">'choice'</span>,
    label <span class="op">=</span> <span class="st">'Buy choices'</span>,
    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'Less'</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">'More'</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,
    selected <span class="op">=</span> <span class="fl">1</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p><code>selectInputReactive</code> is demonstrated with</p>
<ul>
<li><code><a href="../reference/dtedit_selectInputReactive_demo.html">dtedit_selectInputReactive_demo(options = list(display.mode = "showcase"))</a></code></li>
</ul>
<p>with the source code in the <code>app.R</code> tab. In this demonstration, <strong>names.Types</strong> (user types) and <strong>names.Likes</strong> (potential user Likes) are reactive variables which are used to determine the choices to <code>selectInputReactive</code> and <code>selectInputMultipleReactive</code> in the <strong>names</strong> DataTable. <strong>names.Types</strong> and <strong>names.Likes</strong> are themselves altered by changes in two other <code>DTedit</code> datatables.</p>
<p>The same demonstration is shown as part of the demonstration using modular <code>dteditmod</code></p>
<ul>
<li><code><a href="../reference/dteditmod_demo.html">dteditmod_demo(options = list(display.mode = "showcase"))</a></code></li>
</ul>
<p>with source code in the <code>app_mod.R</code> tab. The interacting datatables are in the <code>Emails</code> tab.</p>
</div>
<div id="datatables-options---buttons" class="section level2">
<h2 class="hasAnchor">
<a href="#datatables-options---buttons" class="anchor"></a>Datatables options - buttons</h2>
<p><code>dtedit</code> uses the <a href="https://rstudio.github.io/DT/"><code>DT</code></a> package to create datatables. <a href="https://rstudio.github.io/DT/"><code>DT</code></a> is based on <a href="https://datatables.net/"><code>datatables</code></a>. <code><a href="https://rdrr.io/pkg/DT/man/datatable.html">DT::datatable</a></code> has an <code>options</code> argument. <code>options</code> can be passed through to <code><a href="https://rdrr.io/pkg/DT/man/datatable.html">DT::datatable</a></code> with <code>dtedit</code>’s <code>datatables.options</code> argument. In this case, we can add further arguments to <code><a href="https://rdrr.io/pkg/DT/man/datatable.html">DT::datatable</a></code> by customizing the <code>datatable.call</code> function.</p>
<p>Any argument that is not recognized by <code>dtedit</code> is passed through to <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code>.</p>
<p>The following example adds <a href="https://rstudio.github.io/DT/003-tabletools-buttons.html">copy, CSV, PDF and Excel buttons</a> to <code>dtedit</code>‘s datatable by defining <code>datatable.options</code> and <code>datatable.call</code>. Note that ’Excel’ might not be available on all R installations.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    datatable.call <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
    <span class="op">{</span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">...</span>, extensions <span class="op">=</span> <span class="st">'Buttons'</span><span class="op">)</span><span class="op">}</span>,
    datatable.options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      dom <span class="op">=</span> <span class="st">'Bfrtip'</span>,
      buttons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'copy'</span>, <span class="st">'csv'</span>, <span class="st">'pdf'</span>, <span class="st">'excel'</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p><img src="dtedit_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="action-buttons" class="section level2">
<h2 class="hasAnchor">
<a href="#action-buttons" class="anchor"></a>Action buttons</h2>
<p>An <em>action button</em> column can be created. When an <em>action button</em> is pushed, the function defined in <code>callback.actionButton</code> is called, allowing, for example, modification of the data in the datatable, as shown in the example below.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">grocery.callback.actionButton</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">row</span>, <span class="va">buttonID</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># data - the current copy of 'thedata'</span>
    <span class="co"># row - the row number of the clicked button</span>
    <span class="co"># buttonID - the buttonID of the clicked button</span>
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"You chose"</span>, <span class="va">buttonID</span><span class="op">)</span><span class="op">)</span>
    
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">buttonID</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="st">"random"</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="st">"random"</span><span class="op">)</span> <span class="op">{</span>
      <span class="co"># in this demonstration, all the buttons are 'random'</span>
      <span class="co"># but it is possible to define more than one column of buttons</span>
      <span class="va">data</span><span class="op">[</span><span class="va">row</span>, <span class="st">"Quantity"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>
    <span class="op">}</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>
  <span class="op">}</span>
  
  <span class="va">Grocery_List_Results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dtedit.html">dtedit</a></span><span class="op">(</span>
    <span class="va">input</span>, <span class="va">output</span>,
    name <span class="op">=</span> <span class="st">'Grocery_List'</span>,
    thedata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
      Buy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Tea'</span>, <span class="st">'Biscuits'</span>, <span class="st">'Apples'</span><span class="op">)</span>,
      Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,
      stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>,
    action.buttons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      myaction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span> <span class="co"># the 'myaction' name is arbitrary</span>
        columnLabel <span class="op">=</span> <span class="st">"Choose a number"</span>,
        buttonLabel <span class="op">=</span> <span class="st">"Any number"</span>,
        buttonPrefix <span class="op">=</span> <span class="st">"random"</span>
      <span class="op">)</span>
    <span class="op">)</span>,
    callback.actionButton <span class="op">=</span> <span class="va">grocery.callback.actionButton</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/builder.html">h3</a></span><span class="op">(</span><span class="st">'Grocery List'</span><span class="op">)</span>,
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">'Grocery_List'</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></pre></div>
<p><img src="dtedit_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>A demonstration of action buttons (two columns in the same datatable) can be seen, with source code, with</p>
<ul>
<li><code><a href="../reference/dteditmod_fileInput_demo.html">dteditmod_fileInput_demo(options = list(display.mode = "showcase"))</a></code></li>
</ul>
<p>The code is in the <code>app.R</code> tab. This demonstration uses the modular <code>dteditmod</code>. It also demonstrates use of binary blob data-types, use of <code>view.cols</code> and <code>edit.cols</code> and the (implicit) use of <code>fileInput</code> to store pictures and spreadsheets in the dataframe.</p>
</div>
</div>
<div id="appendix" class="section level1">
<h1 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix - Help files with full option descriptions</h1>
<div id="dtedit-and-dteditmod-help" class="section level2">
<h2 class="hasAnchor">
<a href="#dtedit-and-dteditmod-help" class="anchor"></a><code>dtedit</code> and <code>dteditmod</code> help</h2>
<table class="table"><tr>
<td>
dtedit
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr></table>
<h2>
Create a DataTable with Add, Edit and Delete buttons.
</h2>
<h3>
Description
</h3>
<p>
dtedit - editable DataTable
</p>
<p>
dteditmod - editable DataTable, adapted for use in modules
</p>
<h3>
Usage
</h3>
<pre>
dtedit(input, output, name, thedata, ...)

dteditmod(
  input,
  output,
  session,
  thedata,
  view.cols = names(shiny::isolate(if (shiny::is.reactive(thedata)) {     thedata() }
    else {     thedata })),
  edit.cols = names(shiny::isolate(if (shiny::is.reactive(thedata)) {     thedata() }
    else {     thedata })),
  edit.label.cols = edit.cols,
  delete.info.cols = view.cols,
  delete.info.label.cols = delete.info.cols,
  input.types,
  input.choices = NULL,
  input.choices.reactive = NULL,
  inputEvent = NULL,
  action.buttons = NULL,
  selectize = TRUE,
  modal.size = "m",
  text.width = "100%",
  textarea.width = "570px",
  textarea.height = "200px",
  date.width = "100px",
  datetime.width = "200px",
  numeric.width = "100px",
  select.width = "100%",
  defaultPageLength = 10,
  max.fileInputLength = 1e+08,
  title.delete = "Delete",
  title.edit = "Edit",
  title.add = "New",
  label.delete = "Delete",
  label.edit = "Edit",
  label.add = "New",
  label.copy = "Copy",
  label.save = "Save",
  label.cancel = "Cancel",
  icon.delete = NULL,
  icon.edit = NULL,
  icon.add = NULL,
  icon.copy = NULL,
  text.delete.modal = "Are you sure you want to delete this record?",
  show.delete = TRUE,
  show.update = TRUE,
  show.insert = TRUE,
  show.copy = TRUE,
  callback.delete = function(data, row) { },
  callback.update = function(data, olddata, row) { },
  callback.insert = function(data, row) { },
  callback.actionButton = function(data, row, buttonID) { },
  click.time.threshold = 2,
  useairDatepicker = FALSE,
  datatable.options = list(pageLength = defaultPageLength),
  datatable.rownames = FALSE,
  datatable.call = function(...) {     DT::datatable(...) },
  ...
)
</pre>
<h3>
Arguments
</h3>
<table class="table">
<tr valign="top">
<td>
<code>input</code>
</td>
<td>
<p>
Shiny input object passed from the server.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>output</code>
</td>
<td>
<p>
Shiny output object passed from the server.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>name</code>
</td>
<td>
<p>
(<code>name</code> is available in <code>dtedit</code> only). The <code>name</code> of the outputted editable datatable. The <code>name</code> passed to <code>dtedit</code> is the same as the name passed to <code>uiOutput</code>. Put <code><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput(name)</a></code> where you want the editable datatable in the <code>ui.R</code>. When using more than one <code>dtedit</code> within a Shiny application the name must be unique. (<code>name</code> is converted to the <code>session</code> argument of dteditmod.)
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>thedata</code>
</td>
<td>
<p>
a data frame to view and edit. can be a reactive
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>…</code>
</td>
<td>
<p>
arguments not recognized by DTedit are passed to <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code> By default, <code>datatable.call</code> uses <code>DT::dataframe</code>, so this limits the options that can be passed through this method.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>session</code>
</td>
<td>
<p>
Shiny session object (an environment) passed from the server. Alternatively, the ‘name’ (character) of the outputted editable datatable.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>view.cols</code>
</td>
<td>
<p>
character vector with the column names to show in the DataTable. This can be a subset of the full <code>data.frame</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>edit.cols</code>
</td>
<td>
<p>
character vector with the column names the user can edit/add. This can be a subset of the full <code>data.frame</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>edit.label.cols</code>
</td>
<td>
<p>
character vector with the labels to use on the edit and add dialogs. The length and order of <code>code.cols.labels</code> must correspond to <code>edit.cols</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>delete.info.cols</code>
</td>
<td>
<p>
character vector with the column names specifying which values are presented on the delete dialog. This can be a subset of the full <code>data.frame</code>. Defaults to <code>view.cols</code>. If <code>NULL</code>, no data values are shown on the delete dialog.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>delete.info.label.cols</code>
</td>
<td>
<p>
character vector with the labels to use on the delete dialog. The length and order of <code>delete.info.label.cols</code> must correspond to <code>delete.info.cols</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>input.types</code>
</td>
<td>
<p>
a character vector where the name corresponds to a column in <code>edit.cols</code> and the value is the input type. Possible values are:
</p>
<ul>
<li>
<p>
<code>dateInput</code> - input changed by <code>date.width</code>
</p>
</li>
<li>
<p>
<code>datetimeInput</code> - input changed by <code>datetime.width</code>. needs <code>useairDatepicker</code> set to <code>TRUE</code> and requires package <code>shinyWidgets</code>.
</p>
</li>
<li>
<p>
<code>selectInput</code> - choices determined by <code>input.choices</code>, or the levels of the data column variable (if the column variable is of class <code>factor</code>), or the already present values in the data column.
</p>
</li>
<li>
<p>
<code>selectInputMultiple</code> - choices determined by <code>input.choices</code> or the already present values in the data column.
</p>
</li>
<li>
<p>
<code>selectInputReactive</code> - choices determined by a reactive variable, as defined by <code>input.choices</code> and <code>input.choices.reactive</code>.
</p>
</li>
<li>
<p>
<code>selectInputMultipleReactive</code> - choices determined by a reactive variable, as defined by <code>input.choices</code> and <code>input.choices.reactive</code>
</p>
</li>
<li>
<p>
<code>numericInput</code> - input changed by <code>numeric.width</code>
</p>
</li>
<li>
<p>
<code>textInput</code> - input changed by <code>text.width</code>
</p>
</li>
<li>
<p>
<code>textAreaInput</code> - input changed by <code>textarea.width</code> and <code>textarea.height</code>
</p>
</li>
<li>
<p>
<code>passwordInput</code>
</p>
</li>
<li>
<p>
<code>fileInput</code> - type of acceptable file types is defined by <code>input.choices</code>. Maximum file length is modifed by <code>max.fileInputLength</code>
</p>
</li>
</ul>
<p>
One case where this parameter is desirable is when a text area is required instead of a simple text input.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>input.choices</code>
</td>
<td>
<p>
a list of character vectors. The names of each element in the list must correspond to a column name in the data. The value, a character vector, are the options presented to the user for data entry, in the case of input type <code>selectInput</code>).
</p>
<p>
In the case of input type <code>selectInputReactive</code> or ‘selectInputMultipleReactive“, the value is the name of the reactive in ’input.choices.reactive’
</p>
<p>
In the case of input type ‘fileInput“ this is the ’accept’ argument, which specifies the type of file which is acceptable. Can be a case insensitive file extension (e.g. ‘.csv’ or ‘.rds’) or a MIME type (e.g. ‘text/plain’ or ‘application/pdf’).
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>input.choices.reactive</code>
</td>
<td>
<p>
a named list of reactives, referenced in ‘input.choices’ to use for input type <code>selectInputReactive</code> or <code>selectInputMultipleReactive</code>. The reactive itself is a character vector.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>inputEvent</code>
</td>
<td>
<p>
a named list of functions. The names of each element in the list must correspond to an editable column name in the data. The function is called when the associated input widget event is observed during editing/adding a data row. Can be used, for example, with <code>shinyFeedback</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>action.buttons</code>
</td>
<td>
<p>
a named list of action button columns. Each column description is a list of <code>columnLabel</code>, <code>buttonLabel</code>, <code>buttonPrefix</code>, <code>afterColumn</code>.
</p>
<ul>
<li>
<p>
<code>columnLabel</code> label used for the column.
</p>
</li>
<li>
<p>
<code>buttonLabel</code> label used for each button
</p>
</li>
<li>
<p>
<code>buttonPrefix</code> used as the prefix for action button IDs. The suffix will be a number from ‘1’ to the number of rows. Prefix and suffix will be separated with an underscore ’_’.
</p>
</li>
<li>
<p>
<code>afterColumn</code> if provided, the action button column is placed after this named column.
</p>
</li>
</ul>
</td>
</tr>
<tr valign="top">
<td>
<code>selectize</code>
</td>
<td>
<p>
Whether to use selectize.js or not. See <code>selectInput</code> for more info.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>modal.size</code>
</td>
<td>
<p>
the size of the modal dialog. See <code>modalDialog</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>text.width</code>
</td>
<td>
<p>
width of text inputs.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>textarea.width</code>
</td>
<td>
<p>
the width of text area inputs.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>textarea.height</code>
</td>
<td>
<p>
the height of text area inputs.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>date.width</code>
</td>
<td>
<p>
the width of data inputs
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>datetime.width</code>
</td>
<td>
<p>
the width of datetime inputs
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>numeric.width</code>
</td>
<td>
<p>
the width of numeric inputs.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>select.width</code>
</td>
<td>
<p>
the width of drop down inputs.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>defaultPageLength</code>
</td>
<td>
<p>
number of rows to show in the data table by default.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>max.fileInputLength</code>
</td>
<td>
<p>
the maximum length (in bytes) of <code>fileInput</code>. Shiny itself has a default limit of 5 megabytes per file. The limit can be modified by using shiny.maxRequestSize option.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>title.delete</code>
</td>
<td>
<p>
the title of the dialog box for deleting a row.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>title.edit</code>
</td>
<td>
<p>
the title of the dialog box for editing a row.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>title.add</code>
</td>
<td>
<p>
the title of the dialog box for inserting a new row.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.delete</code>
</td>
<td>
<p>
the label of the delete button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.edit</code>
</td>
<td>
<p>
the label of the edit button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.add</code>
</td>
<td>
<p>
the label of the add button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.copy</code>
</td>
<td>
<p>
the label of the copy button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.save</code>
</td>
<td>
<p>
the label of the save button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>label.cancel</code>
</td>
<td>
<p>
the label of the cancel button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>icon.delete</code>
</td>
<td>
<p>
the icon for the delete button, e.g. <code>icon(“trash”)</code>. Defaults to <code>NULL</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>icon.edit</code>
</td>
<td>
<p>
the icon for the edit button, e.g. <code>icon(“edit”)</code>. Defaults to <code>NULL</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>icon.add</code>
</td>
<td>
<p>
the icon for the add button, e.g. <code>icon(“plus”)</code>. Defaults to <code>NULL</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>icon.copy</code>
</td>
<td>
<p>
the icon for the copy button, e.g. <code>icon(“copy”)</code>. Defaults to <code>NULL</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>text.delete.modal</code>
</td>
<td>
<p>
the text shown in the delete modal dialog.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>show.delete</code>
</td>
<td>
<p>
whether to show/enable the delete button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>show.update</code>
</td>
<td>
<p>
whether to show/enable the update button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>show.insert</code>
</td>
<td>
<p>
whether to show/enable the insert button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>show.copy</code>
</td>
<td>
<p>
whether to show/enable the copy button.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>callback.delete</code>
</td>
<td>
<p>
a function called when the user deletes a row. This function should return an updated data.frame.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>callback.update</code>
</td>
<td>
<p>
a function called when the user updates a row. This function should return an updated data.frame.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>callback.insert</code>
</td>
<td>
<p>
a function called when the user inserts a new row. This function should return an updated data.frame.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>callback.actionButton</code>
</td>
<td>
<p>
a function called when the user clicks an action button. called with arguments <code>data</code>, <code>row</code> and <code>buttonID</code>. This function can return an updated data.frame, alternatively return NULL if data is not to be changed.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>click.time.threshold</code>
</td>
<td>
<p>
This is to prevent duplicate entries usually by double clicking the save or update buttons. If the user clicks the save button again within this amount of time (in seconds), the subsequent click will be ignored. Set to zero to disable this feature. For developers, a message is printed using the warning function.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>useairDatepicker</code>
</td>
<td>
<p>
use <code>shinyWidgets</code> package <code>airDatepickerInput</code>
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>datatable.options</code>
</td>
<td>
<p>
options passed to <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code>. See <a href="https://rstudio.github.io/DT/options.html">https://rstudio.github.io/DT/options.html</a> for more information.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>datatable.rownames</code>
</td>
<td>
<p>
show rownames as part of the datatable? <code>TRUE</code> or <code>FALSE</code>. Note that if datatable.call includes <code style="white-space: pre;">DT::format*</code> calls, then <code>datatable.rownames</code> must equal <code>TRUE</code>
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>datatable.call</code>
</td>
<td>
<p>
pre-processing call when calling <code><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">DT::renderDataTable</a></code>. Can be defined, for example, to include <code style="white-space: pre;">DT::format*</code> calls. <code>dtedit</code> will pass several arguments to the <code>datatable.call</code> function.
</p>
<ul>
<li>
<p>
<code>data</code> a dataframe. may have been processed to add <code>actionButtons</code>
</p>
</li>
<li>
<p>
<code>options</code> - <code>datatable.options</code>
</p>
</li>
<li>
<p>
<code>rownames</code> - <code>datatable.rownames</code>
</p>
</li>
<li>
<p>
<code>escape</code> - escape all columns except those with action buttons.
</p>
</li>
<li>
<p>
<code>selection</code> - <code>single</code>
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>
Details
</h3>
<p>
<code>dtedit</code> is used in conjunction with <code>uiOutput</code> to create editable datatables. <code>dtedit</code> is used in a shiny application’s server definition, <code>uiOutput</code> is used in the UI (user interface) definition.
</p>
<p>
<code>dteditmod</code> is used in conjunction with <code>callModule</code> and <code>dteditmodUI</code> to create editable datatables in a module environment. <code>dteditmod</code> is called through <code>callModule</code> in the ‘server’ section of the shiny application. <code>dteditmodUI</code> is called in the ‘UI’ (user-interface) section of the shiny app.
</p>
<p>
This object will maintain data state. However, in order of the data to persist between Shiny instances, data needs to be saved to some external format (e.g. database or R data file). The callback functions provide a mechanism for this function to interact with a permanent data storage scheme. The callback functions are called when the user adds, updates, or deletes a row from the data table. The callback must accept two parameters: <code>data</code> and <code>row</code>. For inserting and updating, the <code>data</code> object is the current state of data table including any additions or updates. The <code>row</code> parameter indicates which row from <code>data</code> was modified (or added). For deletions, however, the <code>data</code> represents the data table just before deleting the specified row. That is, if <code>callback.delete</code> returns a <code>data.frame</code>, that will be the new data table; otherwise this function will remove row <code>row</code> from <code>data</code> and that will become the current data table.
</p>
<p>
The callback functions may throw errors (see e.g. <code>stop</code>) if there are problems with data. That is, if data validation checks indicate data problems before inserting or updating a row the function may throw an error. Note that the error message will be presented to the user so providing messages meaningful to the user is recommended. Moreover, if an error is thrown, the modal dialog is not dismissed and the user can further edit the data and retry the insertion or update.
</p>
<p>
Callback functions may return a <code>data.frame</code>. When a <code>data.frame</code> is returned that will become the current state of the data table. If anything else is returned then the internal <code>data.frame</code> will be used.
</p>
<h3>
Value
</h3>
<p>
Returns reactiveValues
</p>
<ul>
<li>
<p>
<code>theData</code> - the current state of <code>DTedit</code>’s copy of the data
</p>
</li>
<li>
<p>
<code>view.cols</code>
</p>
</li>
<li>
<p>
<code>edit.cols</code>
</p>
</li>
<li>
<p>
<code>edit.count</code> - number of edits to data done within <code>DTedit</code> (does not include changes to <code>DTedit</code>’s copy of the data secondary to changes of a reactive <code>thedata</code>)
</p>
</li>
<li>
<p>
<code>rows_selected</code> - the row number selected. initially set to <code>NULL</code>
</p>
</li>
</ul>
<h3>
See Also
</h3>
<ul>
<li>
<p>
<code>example(“dtedit”)</code> a simple example.
</p>
</li>
<li>
<p>
<code><a href="../reference/dtedit_demo.html">dtedit_demo()</a></code> demonstration of dtedit.
</p>
</li>
<li>
<p>
<code><a href="../reference/dtedit_reactive_demo.html">dtedit_reactive_demo()</a></code> reactive dataframe
</p>
</li>
<li>
<p>
<code><a href="../reference/dtedit_selectInputReactive_demo.html">dtedit_selectInputReactive_demo()</a></code> reactive selectInput
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>dteditmodUI</code> : the companion user-interface function for <code>dteditmod</code>.<br></p>
</li>
<li>
<p>
<code>example(“dteditmodUI”)</code> a simple module example with reactive dataframe
</p>
</li>
<li>
<p>
<code><a href="../reference/dteditmod_demo.html">dteditmod_demo()</a></code> a more complex module example. Database interaction and interactions between the data of multiple datatables.
</p>
</li>
<li>
<p>
<code><a href="../reference/dteditmod_fileInput_demo.html">dteditmod_fileInput_demo()</a></code> a modular example including binary file input and action buttons.
</p>
</li>
</ul>
<p>
Other Datatable Edit functions: <code><a href="../reference/dteditmodUI.html">dteditmodUI()</a></code>
</p>
<h3>
Examples
</h3>
<pre>
# minimal DTedit example 'dtedit'
# you can try this example in interactive mode
# with 'example("dtedit")'

library(shiny)
library(DTedit)

server &lt;- function(input, output) {
  
  Grocery_List &lt;- dtedit(
    input, output,
    name = 'Grocery_List',
    thedata = data.frame(
      Buy = c('Tea', 'Biscuits', 'Apples'),
      Quantity = c(7, 2, 5),
      stringsAsFactors = FALSE
    )
  )
}

ui &lt;- fluidPage(
  h3('Grocery List'),
  uiOutput('Grocery_List')
)

if (interactive())
  shinyApp(ui = ui, server = server)

#### end of 'dtedit' example ####


# minimal DTedit example 'dteditmod'
# this is a separate application from the 'dtedit' example!
#
# unfortunately, this application cannot be
# tried with 'example("dteditmod")', but you can copy
# and paste to execute in 'interactive' console mode,
# or copy the lines into an '.R' file and choose
# 'Run App' from RStudio.
library(shiny)
library(DTedit)

myModuleUI &lt;- function(id) {
  ns &lt;- shiny::NS(id)
  shiny::tagList(
    dteditmodUI(ns('Grocery_List'))
  )
}

myModule &lt;- function(input, output, session) {
  Grocery_List_Results &lt;- shiny::callModule(
    dteditmod,
    id = 'Grocery_List',
    thedata = data.frame(
      Buy = c('Tea', 'Biscuits', 'Apples'),
      Quantity = c(7, 2, 5),
      stringsAsFactors = FALSE
    )
  )
}

server &lt;- function(input, output, session) {

  shiny::callModule(myModule, 'myModule1')

}

ui &lt;- fluidPage(
  h3('Grocery List'),
  myModuleUI('myModule1')
)

if (interactive() || isTRUE(getOption("shiny.testmode")))
  shinyApp(ui = ui, server = server)
</pre>
</div>
<div id="dteditmodui-help" class="section level2">
<h2 class="hasAnchor">
<a href="#dteditmodui-help" class="anchor"></a><code>dteditmodUI</code> help</h2>
<table class="table"><tr>
<td>
dteditmodUI
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr></table>
<h2>
Create a DataTable with Add, Edit and Delete buttons.
</h2>
<h3>
Description
</h3>
<p>
dteditmodUI - user-interface function for module use
</p>
<h3>
Usage
</h3>
<pre>
dteditmodUI(id)
</pre>
<h3>
Arguments
</h3>
<table class="table"><tr valign="top">
<td>
<code>id</code>
</td>
<td>
<p>
the namespace of the module
</p>
</td>
</tr></table>
<h3>
Details
</h3>
<p>
Use in conjunction with <code>callModule</code> and <code>dtedit</code> to create editable datatables. <code>dteditUI</code> is used in the ‘user interface’ component of the shiny app.
</p>
<h3>
See Also
</h3>
<p>
<code>dteditmod</code> : the companion server-component function.<br></p>
<ul>
<li>
<p>
<code>example(“dteditmodUI”)</code> a simple example with a reactive dataframe
</p>
</li>
<li>
<p>
<code><a href="../reference/dteditmod_demo.html">dteditmod_demo()</a></code> a more complex example. Includes database interaction and interactions between the data of multiple datatables.
</p>
</li>
</ul>
<p>
Other Datatable Edit functions: <code><a href="../reference/dtedit.html">dtedit()</a></code>
</p>
<h3>
Examples
</h3>
<pre>
##### Minimal DTedit example using reactive dataframe #####
library(shiny)
library(DTedit)

##### module ######################

myModuleUI &lt;- function(id) {
  ns &lt;- shiny::NS(id)
  shiny::tagList(
    dteditmodUI(ns("dataspace"))
  )
}

myModule &lt;- function(input, output, session, data_scramble) {
  data &lt;- reactiveVal() # # 'data' will be a 'reactive' dataframe
  data(data.frame(Column1 = c("Apple", "Cherry", "Frozen"),
                  Column2 = c("Pie", "Tart", "Yoghurt"),
                  stringsAsFactors = FALSE))
  data_DT_gui &lt;- callModule(
    dteditmod,
    "dataspace",
    thedata = data,
    edit.cols = c("Column1", "Column2")
  )

  observe({
    data(
      isolate(
        as.data.frame(
          data_DT_gui$thedata,
          stringsasfactors = FALSE
        )
      )
    )
    print(isolate(data()))
    print(paste("Edit count:", data_DT_gui$edit.count))
    # only reacts to change in $edit.count
  })

  observeEvent(data_scramble(), {
    print("Scrambling...")
    temp &lt;- data()
    if (nrow(temp) &gt; 0) {
      row &lt;- sample(seq_len(nrow(temp)), 1)  # row
      col &lt;- sample(1:2, 1)           # column
      temp[row, col] &lt;- paste(
        sample(unlist(strsplit(temp[row, col], "")),
               nchar(temp[row, col])),
        sep = '', collapse = '')
      data(temp) # adjusted dataframe 'automatically' read by DTedit
    }
  })
}

##### Create the Shiny server #####
server &lt;- function(input, output) {

  data_scramble &lt;- shiny::reactive({
    input$data_scramble
  })

  shiny::callModule(myModule, "myModule1", data_scramble)
}

##### Create the shiny UI ######
ui &lt;- fluidPage(
  h3("DTedit using reactive dataframe"),
  wellPanel(p("Try the 'Scramble' button!")),
  myModuleUI("myModule1"),
  actionButton("data_scramble", "Scramble an entry")
)

if (interactive() || isTRUE(getOption("shiny.testmode")))
  shinyApp(ui = ui, server = server)
</pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jason Bryer, David Fong.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
